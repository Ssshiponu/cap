{% load static %}
<nav x-data="{
        navigationMenuOpen: false,
        navigationMenu: '',
        navigationMenuCloseDelay: 200,
        navigationMenuCloseTimeout: null,
        navigationMenuLeave() {
            let that = this;
            this.navigationMenuCloseTimeout = setTimeout(() => {
                that.navigationMenuClose();
            }, this.navigationMenuCloseDelay);
        },
        navigationMenuReposition(navElement) {
            this.navigationMenuClearCloseTimeout();
            this.$refs.navigationDropdown.style.left = navElement.offsetLeft + 'px';
            this.$refs.navigationDropdown.style.marginLeft = (navElement.offsetWidth/2) + 'px';
        },
        navigationMenuClearCloseTimeout(){
            clearTimeout(this.navigationMenuCloseTimeout);
        },
        navigationMenuClose(){
            this.navigationMenuOpen = false;
            this.navigationMenu = '';
        }
    }"
    class="relative z-10 w-auto">
    <div class="relative">
        <ul class="flex flex-1 justify-center items-center space-x-1 list-none text-neutral-700 group">
            <li>
                <button
                    :class="{ 'bg-neutral-100' : navigationMenu=='features', 'hover:bg-neutral-100' : navigationMenu!='features' }" @mouseover="navigationMenuOpen=true; navigationMenuReposition($el); navigationMenu='features'" @mouseleave="navigationMenuLeave()" class="inline-flex justify-center items-center px-4 py-2 w-max h-10 text-sm font-medium rounded-md transition-colors hover:text-neutral-900 focus:outline-none disabled:opacity-50 disabled:pointer-events-none group">
                    <span>Features</span>
                    <svg :class="{ '-rotate-180' : navigationMenuOpen==true && navigationMenu == 'features' }" class="relative top-[1px] ml-1 h-3 w-3 ease-out duration-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
            </li>
            <li>
                <button 
                    :class="{ 'bg-neutral-100' : navigationMenu=='learn-more', 'hover:bg-neutral-100' : navigationMenu!='learn-more' }" @mouseover="navigationMenuOpen=true; navigationMenuReposition($el); navigationMenu='learn-more'" @mouseleave="navigationMenuLeave()" class="inline-flex justify-center items-center px-4 py-2 w-max h-10 text-sm font-medium rounded-md transition-colors hover:text-neutral-900 focus:outline-none disabled:opacity-50 disabled:pointer-events-none bg-background hover:bg-neutral-100 group">
                    <span>Learn More</span>
                    <svg :class="{ '-rotate-180' : navigationMenuOpen==true && navigationMenu == 'learn-more' }" class="relative top-[1px] ml-1 h-3 w-3 ease-out duration-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
            </li>

            <li>
                <a href="#pricing" @click="mobileMenu = false" class="inline-flex justify-center items-center px-4 py-2 w-max h-10 text-sm font-medium rounded-md transition-colors hover:text-neutral-900 focus:outline-none disabled:opacity-50 disabled:pointer-events-none bg-background hover:bg-neutral-100 group">Pricing</a>
                
            </li>
            <li>
                <a href="/about/" @click="mobileMenu = false" class="inline-flex justify-center items-center px-4 py-2 w-max h-10 text-sm font-medium rounded-md transition-colors hover:text-neutral-900 focus:outline-none disabled:opacity-50 disabled:pointer-events-none bg-background hover:bg-neutral-100 group">About</a>

            </li>
            <li>
                <a href="/contact/" @click="mobileMenu = false" class="inline-flex justify-center items-center px-4 py-2 w-max h-10 text-sm font-medium rounded-md transition-colors hover:text-neutral-900 focus:outline-none disabled:opacity-50 disabled:pointer-events-none bg-background hover:bg-neutral-100 group">Contact</a>

            </li>
        </ul>
    </div>
    <div x-ref="navigationDropdown" x-show="navigationMenuOpen"
        x-transition:enter="transition ease-out duration-100"
        x-transition:enter-start="opacity-0 scale-90"
        x-transition:enter-end="opacity-100 scale-100"
        x-transition:leave="transition ease-in duration-100"
        x-transition:leave-start="opacity-100 scale-100"
        x-transition:leave-end="opacity-0 scale-90"
        @mouseover="navigationMenuClearCloseTimeout()" @mouseleave="navigationMenuLeave()"
        class="absolute top-2 pt-3 duration-200 ease-out -translate-x-1/2 translate-y-11" x-cloak>

        <div class="flex overflow-hidden justify-center w-auto h-auto bg-white rounded-xl border shadow-sm border-neutral-200/70">

            <div x-show="navigationMenu == 'features'" class="flex gap-x-3 justify-center items-stretch p-6 w-full max-w-2xl">
                <div class="flex-shrink-0 pt-28 pb-7 w-48 bg-gradient-to-br to-black rounded from-neutral-800">
                    <div class="relative px-7 space-y-1.5 text-white">
                        <img src="{% static 'img/cap.svg' %}" alt="logo" alt="">
                        <span class="block font-bold">Chat Autopilot</span>
                        <span class="block text-sm opacity-60">AI agent performs far better than humans</span>
                    </div>
                </div>
                <div class="w-72">
                    {% for f in metadata.nav_features|slice:":3" %}
                        <a href="#_" @click="navigationMenuClose()" class="block px-3.5 py-3 text-sm rounded hover:bg-neutral-100">
                            <span class="block mb-1 font-medium text-black">{{ f.title }} </span>
                            <span class="block font-light leading-5 opacity-50">{{ f.description }}</span>
                        </a>
                    
                    {% endfor %}

                    
                    
                </div>
            </div>
            <div x-show="navigationMenu == 'learn-more'" class="flex justify-center items-stretch p-6 w-full">
                <div class="grid grid-cols-2 w-xl">
                    {% for f in metadata.nav_features|slice:"3:" %}
                        <a href="#_" @click="navigationMenuClose()" class="block px-3.5 py-3 text-sm rounded hover:bg-neutral-100">
                            <span class="block mb-1 font-medium text-black">{{ f.title }} </span>
                            <span class="block font-light leading-5 opacity-50">{{ f.description }}</span>
                        </a>
                    
                    {% endfor %}
                </div>
            </div>
        
        </div>
    </div>
</nav>
